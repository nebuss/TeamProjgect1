---
title: "1ì¸ í‰ê·  êµ­ë‚´ì—¬í–‰ ì§€ì¶œì•¡ ë¹„êµ: COVID-19 ê¸°ê°„ì„ êµ¬ë¶„ìœ¼ë¡œ"
author: "ì›°ì»´ íˆ¬ ì½”ë¦¬ì•„ğŸ˜(ë°•ìˆ˜ë¹ˆ, ë¬¸ì§€ìœ¤, ìœ ì€ì„œ, ì˜¤í˜„ìš±)"
date: "2024-07-24"
categories: [bigdata]
---


## ë¶„ì„ ì£¼ì œ: "1ì¸ í‰ê·  êµ­ë‚´ì—¬í–‰ ì§€ì¶œì•¡ ë¹„êµ: COVID-19 ê¸°ê°„ì„ êµ¬ë¶„ìœ¼ë¡œ"

- ì¶œì²˜: ë¬¸í™”ì²´ìœ¡ê´€ê´‘ë¶€,ã€Œêµ­ë¯¼ì—¬í–‰ì¡°ì‚¬ã€, 2022, 2024.07.19, êµ­ë‚´ì—¬í–‰ ì§€ì¶œì•¡, [ë°ì´í„° URL](https://kosis.kr/statHtml/statHtml.do?orgId=113&tblId=DT_113_STBL_1029295&conn_path=I2)

> [info] ì°¸ê³  ì‚¬í•­, [ìë£Œì„¤ëª… ì¶”ê°€ìë£Œ](https://nettle-taxicab-cb0.notion.site/31f221be08f2435ab8a36fb0d76b1187)


> 1. ë³¸ í†µê³„ ê°’ì€ 2023ë…„ 12ì›” ë§Œ 15ì„¸ ì´ìƒ ì¸êµ¬ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ëª¨ìˆ˜ ì¶”ì •í•œ ê²°ê³¼
>  - ëª¨ìˆ˜ì¶”ì •ë²• ë°ì´í„° ì‚¬ìš©ì´ë€?
> </br>
>  í†µê³„í•™ì˜ ëŒ€ì „ì œëŠ” ë¶„ì„ ëŒ€ìƒ ì „ì²´(ëª¨ì§‘ë‹¨)ë¥¼ ë¶„ì„í•˜ê¸°ì—ëŠ” ë§ì€ ë¹„ìš©ì´ ë°œìƒí•˜ë¯€ë¡œ ë¶€ë¶„(í‘œë³¸)ì„ í†µí•´ ëª¨ì§‘ë‹¨ì˜ íŠ¹ì„±ì„ íŒŒì•…í•˜ëŠ” ê²ƒì´ë‹¤. ëª¨ì§‘ë‹¨ì˜ ì¼ë¶€ì¸ í‘œë³¸ì— í†µê³„ ë¶„ì„ ë°©ë²•ì„ ì ìš©í•´ ëª¨ìˆ˜ë¥¼ ì¶”ì •í•˜ëŠ” ë°©ë²•ì„ ëª¨ìˆ˜ ì¶”ì •ì´ë¼ í•œë‹¤.

> 2. ë³¸ í†µê³„ì˜ 'ë§Œ 15ì„¸ ì´ìƒ ì „êµ­ë¯¼'ì€ 2023ë…„ ì¥ë˜ì¸êµ¬ì¶”ê³„ì¸ 45,872,017ëª…ì„ ê¸°ì¤€ìœ¼ë¡œ í•¨

> 3. ê´€ê´‘ì—¬í–‰ê³¼ ê¸°íƒ€ì—¬í–‰ êµ¬ë¶„
>  - ê´€ê´‘ì—¬í–‰: ì—¬í–‰ì˜ ì£¼ëœ ëª©ì ì´ 'ê´€ê´‘â€§íœ´ì–‘'ì¸ ê²½ìš°
>  - ê¸°íƒ€ì—¬í–‰: ì—¬í–‰ì˜ ì£¼ëœ ëª©ì ì´ 'ì¶œì¥Â·ì—…ë¬´', 'ë‹¨ìˆœ ê·€ì„±, ë‹¨ìˆœ ì¹œêµ¬Â·ì¹œì§€ ë°©ë¬¸'ì¸ ê²½ìš°

> 4. ìˆ˜ë¡ëœ ìˆ«ìëŠ” ë‹¨ìœ„ ë¯¸ë§Œì—ì„œ ë°˜ì˜¬ë¦¼, ê° í•­ëª© ê°’ì˜ í•©ì´ ì´ê³„(ë˜ëŠ” ì „ì²´)ì™€ ì¼ì¹˜í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŒ

> 5. ë‹¨ìœ„: ì‹­ì–µì›


---

- ì¡°ì‚¬ê¸°ê°„ ë° ì¡°ì‚¬ëŒ€ìƒ ê·œëª¨

> 1) COVID-19 ì´ì „: 2018ë…„(48,000ëª…), 2019ë…„(50,400ëª…)
> 2) COVID-19 ê¸°ê°„: 2020ë…„(50,400ëª…), 2021ë…„(51,600ëª…)
> 3) COVID-19 ì´í›„: 2022ë…„(51,600ëª…)

---
## ë¶„ì„ ì‹œì‘!!

```{python}
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
```



## 1. 2022ë…„ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°

- ì›ë³¸ ë°ì´í„°(excel)ìƒ, 1í–‰ê³¼ 2í–‰ ì¼ë¶€ê°€ ë³‘í•©ë˜ì–´ ìˆìŒ.
```{python}
df_22 = pd.read_excel('data/domestic_2022.xlsx')
df_22.head(2)
```

</br>

- ì›ë³¸ ë°ì´í„°ì˜ 2í–‰ë¶€í„° ë¶ˆëŸ¬ì˜¤ê³ ì header = 1ë¡œ ì„¤ì •í•˜ì˜€ìŒ. 
```{python}
df_22 = pd.read_excel('data/domestic_2022.xlsx', header = 1)
df_22
```

***

## 2. ë³€ìˆ˜ ì´ë¦„ ë°”ê¿”ë³´ê¸°
##### ë°ì´í„° ë³€ìˆ˜ í™•ì¸

```{python}
df_22.columns
```

```{python}
df_22 = df_22.rename(columns = {'í†µê³„ë¶„ë¥˜(1)' : 'class1',
                                'í†µê³„ë¶„ë¥˜(2)' : 'class2',
                                'êµ­ë‚´ì „ì²´'    : 'dm_total',
                                'êµ­ë‚´ìˆ™ë°•'    : 'dm_stay',
                                'êµ­ë‚´ë‹¹ì¼'    : 'dm_1day',
                                'ê´€ê´‘ì „ì²´'    : 'tr_total',
                                'ê´€ê´‘ìˆ™ë°•'    : 'tr_stay',
                                'ê´€ê´‘ë‹¹ì¼'    : 'tr_1day',
                                'ê¸°íƒ€ì „ì²´'    : 'ot_total',
                                'ê¸°íƒ€ìˆ™ë°•'    : 'ot_stay',
                                'ê¸°íƒ€ë‹¹ì¼'    : 'ot_1day'
                          })
df_22.columns
```

***

## 3. 'class1'ì˜ Nan ê°’ì— classì— ë§ëŠ” ê°’ ë¶€ì—¬ & ì˜ë¬¸ëª…ìœ¼ë¡œ ë³€ê²½
```{python}

df_22.loc[0, ['class1']] = "category-sum"
df_22.loc[1:2, ['class1']] = "sex"
df_22.loc[3:9, ['class1']] = "age"
df_22.loc[10:16, ['class1']] = "job"
df_22.loc[17:20, ['class1']] = "edu"
df_22.loc[21:23, ['class1']] = "fam"
df_22.loc[24:30, ['class1']] = "income"

df_22.head()
```
</br>

***

## 4. 'class2'ë„ ì˜ë¬¸ìœ¼ë¡œ ë³€ê²½
```{python}
df_22.loc[0, ["class2"]] = "sum_22"

#sex
df_22.loc[df_22["class2"] == "ë‚¨ì", "class2"] = "M"
df_22.loc[df_22["class2"] == "ì—¬ì", "class2"] = "F"

#age
df_22.loc[df_22["class2"] == "15~19ì„¸"  , "class2"] = "10s"
df_22.loc[df_22["class2"] == "20ëŒ€"     , "class2"] = "20s"
df_22.loc[df_22["class2"] == "30ëŒ€"     , "class2"] = "30s"
df_22.loc[df_22["class2"] == "40ëŒ€"     , "class2"] = "40s"
df_22.loc[df_22["class2"] == "50ëŒ€"     , "class2"] = "50s"
df_22.loc[df_22["class2"] == "60ëŒ€"     , "class2"] = "60s"
df_22.loc[df_22["class2"] == "70ì„¸ ì´ìƒ", "class2"] = "70s~"

#job
df_22.loc[df_22["class2"] == "ì„ê¸ˆë´‰ê¸‰ê·¼ë¡œì"    , "class2"] = "work"
df_22.loc[df_22["class2"] == "ê³ ìš©ì›ìˆëŠ”ì‚¬ì—…ì£¼"  , "class2"] = "co_ceo"
df_22.loc[df_22["class2"] == "ê³ ìš©ì›ì—†ëŠ”ìì˜ì—…ì", "class2"] = "self-ceo"
df_22.loc[df_22["class2"] == "ë¬´ê¸‰ê°€ì¡± ì¢…ì‚¬ì"   , "class2"] = "fam_work"
df_22.loc[df_22["class2"] == "ì „ì—…ì£¼ë¶€"          , "class2"] = "house_work"
df_22.loc[df_22["class2"] == "í•™ìƒ"              , "class2"] = "stu"
df_22.loc[df_22["class2"] == "ê¸°íƒ€"              , "class2"] = "etc"

#edu
df_22.loc[df_22["class2"] == "ì´ˆì¡¸ ì´í•˜" , "class2"] = "~prime_edu"
df_22.loc[df_22["class2"] == "ì¤‘í•™êµ"    , "class2"] = "middle_edu"
df_22.loc[df_22["class2"] == "ê³ ë“±í•™êµ"  , "class2"] = "high_edu"
df_22.loc[df_22["class2"] == "ëŒ€í•™êµì´ìƒ", "class2"] = "univ_edu~"

#fam
df_22.loc[df_22["class2"] == "1ì¸"    , "class2"] = "1p"
df_22.loc[df_22["class2"] == "2ì¸"    , "class2"] = "2p"
df_22.loc[df_22["class2"] == "3ì¸ì´ìƒ", "class2"] = "3p~"

#income
df_22.loc[df_22["class2"] == "100ë§Œì› ë¯¸ë§Œ"    , "class2"] = "~100"
df_22.loc[df_22["class2"] == "100~200ë§Œì› ë¯¸ë§Œ", "class2"] = "100~200"
df_22.loc[df_22["class2"] == "200~300ë§Œì› ë¯¸ë§Œ", "class2"] = "200~300"
df_22.loc[df_22["class2"] == "300~400ë§Œì› ë¯¸ë§Œ", "class2"] = "300~400"
df_22.loc[df_22["class2"] == "400~500ë§Œì› ë¯¸ë§Œ", "class2"] = "400~500"
df_22.loc[df_22["class2"] == "500~600ë§Œì› ë¯¸ë§Œ", "class2"] = "500~600"
df_22.loc[df_22["class2"] == "600ë§Œì› ì´ìƒ"    , "class2"] = "600~"

df_22.head()
```

</br>

##### class1ê³¼ class2ë¥¼ indexë¡œ ì„¤ì •

```{python}
df_22 = df_22.set_index(['class1', 'class2'])

df_22.head(10)
```

</br>

***

## 5. ë¶„ì„ì— í•„ìš”í•œ ë¶€ë¶„ë§Œ ì¶”ì¶œí•˜ê¸°!
- ì—°ë„ë³„ 1ì¸ í‰ê·  ì§€ì¶œì•¡ì„ ì•Œê³ ì ì„±ë³„, ì—°ë ¹ê³¼ ê°™ì€ ë¶€ë¶„ì€ ë¹¼ê³  ì§€ì¶œì•¡ë§Œ ì„ íƒ
- df_22ì—ì„œ ì²«ë²ˆì§¸ í–‰ì—ì„œ dm_total, tr_total, ot_total ì¶”ì¶œ
- 1ì¸ í‰ê·  ì§€ì¶œì•¡ì„ ì› ë‹¨ìœ„ë¡œ êµ¬í•˜ê³ ì ê¸°ë³¸ ë‹¨ìœ„ì¸ 10ì–µ ì›ì„ ê³±í•¨
- ì´ë¥¼ 2023ë…„ ì¥ë˜ì¸êµ¬ì¶”ê³„ì¸ 45,872,017ëª…ìœ¼ë¡œ ë‚˜ëˆ”


```{python}
df_22_sum = df_22.loc["category-sum", ["dm_total", "tr_total", "ot_total"]] * 1000000000 / 45872017
df_22_sum
```


***

</br>

##### 2018~2021 ë°ì´í„°ë„ ë™ì¼í•˜ê²Œ ì‘ì—… ì§„í–‰

***

- 2018ë…„
```{python}
df_18 = pd.read_excel('data/domestic_2018.xlsx', header = 1)
df_18 = df_18.rename(columns = {'í†µê³„ë¶„ë¥˜(1)' : 'class1',
                                'í†µê³„ë¶„ë¥˜(2)' : 'class2',
                                'êµ­ë‚´ì „ì²´'    : 'dm_total',
                                'êµ­ë‚´ìˆ™ë°•'    : 'dm_stay',
                                'êµ­ë‚´ë‹¹ì¼'    : 'dm_1day',
                                'ê´€ê´‘ì „ì²´'    : 'tr_total',
                                'ê´€ê´‘ìˆ™ë°•'    : 'tr_stay',
                                'ê´€ê´‘ë‹¹ì¼'    : 'tr_1day',
                                'ê¸°íƒ€ì „ì²´'    : 'ot_total',
                                'ê¸°íƒ€ìˆ™ë°•'    : 'ot_stay',
                                'ê¸°íƒ€ë‹¹ì¼'    : 'ot_1day'
                          })

df_18.loc[0, ['class1']] = "category-sum"
df_18.loc[1:2, ['class1']] = "sex"
df_18.loc[3:9, ['class1']] = "age"
df_18.loc[10:16, ['class1']] = "job"
df_18.loc[17:20, ['class1']] = "edu"
df_18.loc[21:23, ['class1']] = "fam"
df_18.loc[24:30, ['class1']] = "income"

df_18.loc[0, ["class2"]] = "sum_18"
df_18.loc[df_18["class2"] == "ë‚¨ì", "class2"] = "M"
df_18.loc[df_18["class2"] == "ì—¬ì", "class2"] = "F"
df_18.loc[df_18["class2"] == "15~19ì„¸"  , "class2"] = "10s"
df_18.loc[df_18["class2"] == "20ëŒ€"     , "class2"] = "20s"
df_18.loc[df_18["class2"] == "30ëŒ€"     , "class2"] = "30s"
df_18.loc[df_18["class2"] == "40ëŒ€"     , "class2"] = "40s"
df_18.loc[df_18["class2"] == "50ëŒ€"     , "class2"] = "50s"
df_18.loc[df_18["class2"] == "60ëŒ€"     , "class2"] = "60s"
df_18.loc[df_18["class2"] == "70ì„¸ ì´ìƒ", "class2"] = "70s~"
df_18.loc[df_18["class2"] == "ì„ê¸ˆë´‰ê¸‰ê·¼ë¡œì"    , "class2"] = "work"
df_18.loc[df_18["class2"] == "ê³ ìš©ì›ìˆëŠ”ì‚¬ì—…ì£¼"  , "class2"] = "co_ceo"
df_18.loc[df_18["class2"] == "ê³ ìš©ì›ì—†ëŠ”ìì˜ì—…ì", "class2"] = "self-ceo"
df_18.loc[df_18["class2"] == "ë¬´ê¸‰ê°€ì¡± ì¢…ì‚¬ì"   , "class2"] = "fam_work"
df_18.loc[df_18["class2"] == "ì „ì—…ì£¼ë¶€"          , "class2"] = "house_work"
df_18.loc[df_18["class2"] == "í•™ìƒ"              , "class2"] = "stu"
df_18.loc[df_18["class2"] == "ê¸°íƒ€"              , "class2"] = "etc"
df_18.loc[df_18["class2"] == "ì´ˆì¡¸ ì´í•˜" , "class2"] = "~prime_edu"
df_18.loc[df_18["class2"] == "ì¤‘í•™êµ"    , "class2"] = "middle_edu"
df_18.loc[df_18["class2"] == "ê³ ë“±í•™êµ"  , "class2"] = "high_edu"
df_18.loc[df_18["class2"] == "ëŒ€í•™êµì´ìƒ", "class2"] = "univ_edu~"
df_18.loc[df_18["class2"] == "1ì¸"    , "class2"] = "1p"
df_18.loc[df_18["class2"] == "2ì¸"    , "class2"] = "2p"
df_18.loc[df_18["class2"] == "3ì¸ì´ìƒ", "class2"] = "3p~"
df_18.loc[df_18["class2"] == "100ë§Œì› ë¯¸ë§Œ"    , "class2"] = "~100"
df_18.loc[df_18["class2"] == "100~200ë§Œì› ë¯¸ë§Œ", "class2"] = "100~200"
df_18.loc[df_18["class2"] == "200~300ë§Œì› ë¯¸ë§Œ", "class2"] = "200~300"
df_18.loc[df_18["class2"] == "300~400ë§Œì› ë¯¸ë§Œ", "class2"] = "300~400"
df_18.loc[df_18["class2"] == "400~500ë§Œì› ë¯¸ë§Œ", "class2"] = "400~500"
df_18.loc[df_18["class2"] == "500~600ë§Œì› ë¯¸ë§Œ", "class2"] = "500~600"
df_18.loc[df_18["class2"] == "600ë§Œì› ì´ìƒ"    , "class2"] = "600~"

```



- class1ê³¼ class2ë¥¼ indexë¡œ ì„¤ì •
```{python}
df_18 = df_18.set_index(['class1', 'class2'])
```

</br>

- ë¶„ì„ì— í•„ìš”í•œ ë¶€ë¶„ë§Œ ì¶”ì¶œ
```{python}
df_18_sum = df_18.loc["category-sum", ["dm_total", "tr_total", "ot_total"]] * 1000000000 / 45872017
df_18_sum
```

</br>

- 2019ë…„
```{python}
df_19 = pd.read_excel('data/domestic_2019.xlsx', header = 1)
df_19 = df_19.rename(columns = {'í†µê³„ë¶„ë¥˜(1)' : 'class1',
                                'í†µê³„ë¶„ë¥˜(2)' : 'class2',
                                'êµ­ë‚´ì „ì²´'    : 'dm_total',
                                'êµ­ë‚´ìˆ™ë°•'    : 'dm_stay',
                                'êµ­ë‚´ë‹¹ì¼'    : 'dm_1day',
                                'ê´€ê´‘ì „ì²´'    : 'tr_total',
                                'ê´€ê´‘ìˆ™ë°•'    : 'tr_stay',
                                'ê´€ê´‘ë‹¹ì¼'    : 'tr_1day',
                                'ê¸°íƒ€ì „ì²´'    : 'ot_total',
                                'ê¸°íƒ€ìˆ™ë°•'    : 'ot_stay',
                                'ê¸°íƒ€ë‹¹ì¼'    : 'ot_1day'
                          })

df_19.loc[0,     ['class1']] = "category-sum"
df_19.loc[1:2,   ['class1']] = "sex"
df_19.loc[3:9,   ['class1']] = "age"
df_19.loc[10:16, ['class1']] = "job"
df_19.loc[17:20, ['class1']] = "edu"
df_19.loc[21:23, ['class1']] = "fam"
df_19.loc[24:30, ['class1']] = "income"

df_19.loc[0, ["class2"]] = "sum_19"
df_19.loc[df_19["class2"] == "ë‚¨ì", "class2"] = "M"
df_19.loc[df_19["class2"] == "ì—¬ì", "class2"] = "F"
df_19.loc[df_19["class2"] == "15~19ì„¸"  , "class2"] = "10s"
df_19.loc[df_19["class2"] == "20ëŒ€"     , "class2"] = "20s"
df_19.loc[df_19["class2"] == "30ëŒ€"     , "class2"] = "30s"
df_19.loc[df_19["class2"] == "40ëŒ€"     , "class2"] = "40s"
df_19.loc[df_19["class2"] == "50ëŒ€"     , "class2"] = "50s"
df_19.loc[df_19["class2"] == "60ëŒ€"     , "class2"] = "60s"
df_19.loc[df_19["class2"] == "70ì„¸ ì´ìƒ", "class2"] = "70s~"
df_19.loc[df_19["class2"] == "ì„ê¸ˆë´‰ê¸‰ê·¼ë¡œì"    , "class2"] = "work"
df_19.loc[df_19["class2"] == "ê³ ìš©ì›ìˆëŠ”ì‚¬ì—…ì£¼"  , "class2"] = "co_ceo"
df_19.loc[df_19["class2"] == "ê³ ìš©ì›ì—†ëŠ”ìì˜ì—…ì", "class2"] = "self-ceo"
df_19.loc[df_19["class2"] == "ë¬´ê¸‰ê°€ì¡± ì¢…ì‚¬ì"   , "class2"] = "fam_work"
df_19.loc[df_19["class2"] == "ì „ì—…ì£¼ë¶€"          , "class2"] = "house_work"
df_19.loc[df_19["class2"] == "í•™ìƒ"              , "class2"] = "stu"
df_19.loc[df_19["class2"] == "ê¸°íƒ€"              , "class2"] = "etc"
df_19.loc[df_19["class2"] == "ì´ˆì¡¸ ì´í•˜" , "class2"] = "~prime_edu"
df_19.loc[df_19["class2"] == "ì¤‘í•™êµ"    , "class2"] = "middle_edu"
df_19.loc[df_19["class2"] == "ê³ ë“±í•™êµ"  , "class2"] = "high_edu"
df_19.loc[df_19["class2"] == "ëŒ€í•™êµì´ìƒ", "class2"] = "univ_edu~"
df_19.loc[df_19["class2"] == "1ì¸"    , "class2"] = "1p"
df_19.loc[df_19["class2"] == "2ì¸"    , "class2"] = "2p"
df_19.loc[df_19["class2"] == "3ì¸ì´ìƒ", "class2"] = "3p~"
df_19.loc[df_19["class2"] == "100ë§Œì› ë¯¸ë§Œ"    , "class2"] = "~100"
df_19.loc[df_19["class2"] == "100~200ë§Œì› ë¯¸ë§Œ", "class2"] = "100~200"
df_19.loc[df_19["class2"] == "200~300ë§Œì› ë¯¸ë§Œ", "class2"] = "200~300"
df_19.loc[df_19["class2"] == "300~400ë§Œì› ë¯¸ë§Œ", "class2"] = "300~400"
df_19.loc[df_19["class2"] == "400~500ë§Œì› ë¯¸ë§Œ", "class2"] = "400~500"
df_19.loc[df_19["class2"] == "500~600ë§Œì› ë¯¸ë§Œ", "class2"] = "500~600"
df_19.loc[df_19["class2"] == "600ë§Œì› ì´ìƒ"    , "class2"] = "600~"
```



-  class1ê³¼ class2ë¥¼ indexë¡œ ì„¤ì •
```{python}
df_19 = df_19.set_index(['class1', 'class2'])
```



- ë¶„ì„ì— í•„ìš”í•œ ë¶€ë¶„ë§Œ ì¶”ì¶œ
```{python}
df_19_sum = df_19.loc["category-sum", ["dm_total", "tr_total", "ot_total"]] * 1000000000 / 45872017
df_19_sum
```

</br>

- 2020ë…„

```{python}
df_20 = pd.read_excel('data/domestic_2020.xlsx', header = 1)
df_20 = df_20.rename(columns = {'í†µê³„ë¶„ë¥˜(1)' : 'class1',
                                'í†µê³„ë¶„ë¥˜(2)' : 'class2',
                                'êµ­ë‚´ì „ì²´'    : 'dm_total',
                                'êµ­ë‚´ìˆ™ë°•'    : 'dm_stay',
                                'êµ­ë‚´ë‹¹ì¼'    : 'dm_1day',
                                'ê´€ê´‘ì „ì²´'    : 'tr_total',
                                'ê´€ê´‘ìˆ™ë°•'    : 'tr_stay',
                                'ê´€ê´‘ë‹¹ì¼'    : 'tr_1day',
                                'ê¸°íƒ€ì „ì²´'    : 'ot_total',
                                'ê¸°íƒ€ìˆ™ë°•'    : 'ot_stay',
                                'ê¸°íƒ€ë‹¹ì¼'    : 'ot_1day'
                          })

df_20.loc[0,     ['class1']] = "category-sum"
df_20.loc[1:2,   ['class1']] = "sex"
df_20.loc[3:9,   ['class1']] = "age"
df_20.loc[10:16, ['class1']] = "job"
df_20.loc[17:20, ['class1']] = "edu"
df_20.loc[21:23, ['class1']] = "fam"
df_20.loc[24:30, ['class1']] = "income"

df_20.loc[0, ["class2"]] = "sum_20"
df_20.loc[df_20["class2"] == "ë‚¨ì", "class2"] = "M"
df_20.loc[df_20["class2"] == "ì—¬ì", "class2"] = "F"
df_20.loc[df_20["class2"] == "15~19ì„¸"  , "class2"] = "10s"
df_20.loc[df_20["class2"] == "20ëŒ€"     , "class2"] = "20s"
df_20.loc[df_20["class2"] == "30ëŒ€"     , "class2"] = "30s"
df_20.loc[df_20["class2"] == "40ëŒ€"     , "class2"] = "40s"
df_20.loc[df_20["class2"] == "50ëŒ€"     , "class2"] = "50s"
df_20.loc[df_20["class2"] == "60ëŒ€"     , "class2"] = "60s"
df_20.loc[df_20["class2"] == "70ì„¸ ì´ìƒ", "class2"] = "70s~"
df_20.loc[df_20["class2"] == "ì„ê¸ˆë´‰ê¸‰ê·¼ë¡œì"    , "class2"] = "work"
df_20.loc[df_20["class2"] == "ê³ ìš©ì›ìˆëŠ”ì‚¬ì—…ì£¼"  , "class2"] = "co_ceo"
df_20.loc[df_20["class2"] == "ê³ ìš©ì›ì—†ëŠ”ìì˜ì—…ì", "class2"] = "self-ceo"
df_20.loc[df_20["class2"] == "ë¬´ê¸‰ê°€ì¡± ì¢…ì‚¬ì"   , "class2"] = "fam_work"
df_20.loc[df_20["class2"] == "ì „ì—…ì£¼ë¶€"          , "class2"] = "house_work"
df_20.loc[df_20["class2"] == "í•™ìƒ"              , "class2"] = "stu"
df_20.loc[df_20["class2"] == "ê¸°íƒ€"              , "class2"] = "etc"
df_20.loc[df_20["class2"] == "ì´ˆì¡¸ ì´í•˜" , "class2"] = "~prime_edu"
df_20.loc[df_20["class2"] == "ì¤‘í•™êµ"    , "class2"] = "middle_edu"
df_20.loc[df_20["class2"] == "ê³ ë“±í•™êµ"  , "class2"] = "high_edu"
df_20.loc[df_20["class2"] == "ëŒ€í•™êµì´ìƒ", "class2"] = "univ_edu~"
df_20.loc[df_20["class2"] == "1ì¸"    , "class2"] = "1p"
df_20.loc[df_20["class2"] == "2ì¸"    , "class2"] = "2p"
df_20.loc[df_20["class2"] == "3ì¸ì´ìƒ", "class2"] = "3p~"
df_20.loc[df_20["class2"] == "100ë§Œì› ë¯¸ë§Œ"    , "class2"] = "~100"
df_20.loc[df_20["class2"] == "100~200ë§Œì› ë¯¸ë§Œ", "class2"] = "100~200"
df_20.loc[df_20["class2"] == "200~300ë§Œì› ë¯¸ë§Œ", "class2"] = "200~300"
df_20.loc[df_20["class2"] == "300~400ë§Œì› ë¯¸ë§Œ", "class2"] = "300~400"
df_20.loc[df_20["class2"] == "400~500ë§Œì› ë¯¸ë§Œ", "class2"] = "400~500"
df_20.loc[df_20["class2"] == "500~600ë§Œì› ë¯¸ë§Œ", "class2"] = "500~600"
df_20.loc[df_20["class2"] == "600ë§Œì› ì´ìƒ"    , "class2"] = "600~"

```


- class1ê³¼ class2ë¥¼ indexë¡œ ì„¤ì •
```{python}
df_20 = df_20.set_index(['class1', 'class2'])
```



- ë¶„ì„ì— í•„ìš”í•œ ë¶€ë¶„ë§Œ ì¶”ì¶œ

```{python}
df_20_sum = df_20.loc["category-sum", ["dm_total", "tr_total", "ot_total"]] * 1000000000 / 45872017
df_20_sum
```

</br>

- 2021ë…„

```{python}
df_21 = pd.read_excel('data/domestic_2021.xlsx', header = 1)
df_21 = df_21.rename(columns = {'í†µê³„ë¶„ë¥˜(1)' : 'class1',
                                'í†µê³„ë¶„ë¥˜(2)' : 'class2',
                                'êµ­ë‚´ì „ì²´'    : 'dm_total',
                                'êµ­ë‚´ìˆ™ë°•'    : 'dm_stay',
                                'êµ­ë‚´ë‹¹ì¼'    : 'dm_1day',
                                'ê´€ê´‘ì „ì²´'    : 'tr_total',
                                'ê´€ê´‘ìˆ™ë°•'    : 'tr_stay',
                                'ê´€ê´‘ë‹¹ì¼'    : 'tr_1day',
                                'ê¸°íƒ€ì „ì²´'    : 'ot_total',
                                'ê¸°íƒ€ìˆ™ë°•'    : 'ot_stay',
                                'ê¸°íƒ€ë‹¹ì¼'    : 'ot_1day'
                          })

df_21.loc[0, ['class1']] = "category-sum"
df_21.loc[1:2, ['class1']] = "sex"
df_21.loc[3:9, ['class1']] = "age"
df_21.loc[10:16, ['class1']] = "job"
df_21.loc[17:20, ['class1']] = "edu"
df_21.loc[21:23, ['class1']] = "fam"
df_21.loc[24:30, ['class1']] = "income"

df_21.loc[0, ["class2"]] = "sum_21"
df_21.loc[df_21["class2"] == "ë‚¨ì", "class2"] = "M"
df_21.loc[df_21["class2"] == "ì—¬ì", "class2"] = "F"
df_21.loc[df_21["class2"] == "15~19ì„¸"  , "class2"] = "10s"
df_21.loc[df_21["class2"] == "20ëŒ€"     , "class2"] = "20s"
df_21.loc[df_21["class2"] == "30ëŒ€"     , "class2"] = "30s"
df_21.loc[df_21["class2"] == "40ëŒ€"     , "class2"] = "40s"
df_21.loc[df_21["class2"] == "50ëŒ€"     , "class2"] = "50s"
df_21.loc[df_21["class2"] == "60ëŒ€"     , "class2"] = "60s"
df_21.loc[df_21["class2"] == "70ì„¸ ì´ìƒ", "class2"] = "70s~"
df_21.loc[df_21["class2"] == "ì„ê¸ˆë´‰ê¸‰ê·¼ë¡œì"    , "class2"] = "work"
df_21.loc[df_21["class2"] == "ê³ ìš©ì›ìˆëŠ”ì‚¬ì—…ì£¼"  , "class2"] = "co_ceo"
df_21.loc[df_21["class2"] == "ê³ ìš©ì›ì—†ëŠ”ìì˜ì—…ì", "class2"] = "self-ceo"
df_21.loc[df_21["class2"] == "ë¬´ê¸‰ê°€ì¡± ì¢…ì‚¬ì"   , "class2"] = "fam_work"
df_21.loc[df_21["class2"] == "ì „ì—…ì£¼ë¶€"          , "class2"] = "house_work"
df_21.loc[df_21["class2"] == "í•™ìƒ"              , "class2"] = "stu"
df_21.loc[df_21["class2"] == "ê¸°íƒ€"              , "class2"] = "etc"
df_21.loc[df_21["class2"] == "ì´ˆì¡¸ ì´í•˜" , "class2"] = "~prime_edu"
df_21.loc[df_21["class2"] == "ì¤‘í•™êµ"    , "class2"] = "middle_edu"
df_21.loc[df_21["class2"] == "ê³ ë“±í•™êµ"  , "class2"] = "high_edu"
df_21.loc[df_21["class2"] == "ëŒ€í•™êµì´ìƒ", "class2"] = "univ_edu~"
df_21.loc[df_21["class2"] == "1ì¸"    , "class2"] = "1p"
df_21.loc[df_21["class2"] == "2ì¸"    , "class2"] = "2p"
df_21.loc[df_21["class2"] == "3ì¸ì´ìƒ", "class2"] = "3p~"
df_21.loc[df_21["class2"] == "100ë§Œì› ë¯¸ë§Œ"    , "class2"] = "~100"
df_21.loc[df_21["class2"] == "100~200ë§Œì› ë¯¸ë§Œ", "class2"] = "100~200"
df_21.loc[df_21["class2"] == "200~300ë§Œì› ë¯¸ë§Œ", "class2"] = "200~300"
df_21.loc[df_21["class2"] == "300~400ë§Œì› ë¯¸ë§Œ", "class2"] = "300~400"
df_21.loc[df_21["class2"] == "400~500ë§Œì› ë¯¸ë§Œ", "class2"] = "400~500"
df_21.loc[df_21["class2"] == "500~600ë§Œì› ë¯¸ë§Œ", "class2"] = "500~600"
df_21.loc[df_21["class2"] == "600ë§Œì› ì´ìƒ"    , "class2"] = "600~"

```


- class1ê³¼ class2ë¥¼ indexë¡œ ì„¤ì •
```{python}

df_21 = df_21.set_index(['class1', 'class2'])

```

- ë¶„ì„ì— í•„ìš”í•œ ë¶€ë¶„ë§Œ ì¶”ì¶œ
```{python}
df_21_sum = df_21.loc["category-sum", ["dm_total", "tr_total", "ot_total"]] * 1000000000 / 45872017
df_21_sum
```

***

</br>

#### ì „ì²˜ë¦¬ ì‘ì—… ë
```{python}
df_18_sum
```

</br>

```{python}
df_19_sum
```

</br>

```{python}
df_20_sum
```

</br>

```{python}
df_21_sum
```

</br>

```{python}
df_22_sum
```

---

</br>


#### ì—°ë„ë³„ ë¹„êµ ê·¸ë˜í”„ ë§Œë“¤ê¸°

</br>

- ë¹„êµê°€ ì‰½ë„ë¡ ë°ì´í„° í”„ë ˆì„ ìƒì„±
```{python}
ex_df = pd.concat([df_18_sum,df_19_sum,df_20_sum,df_21_sum,df_22_sum])
ex_df
```

</br>

```{python}
import seaborn as sns
sns.lineplot(data = ex_df, x = ex_df.index, y = 'dm_total', marker = 'o', label = 'dm_total')
sns.lineplot(data = ex_df, x = ex_df.index, y = 'tr_total', marker = 'o', label = 'tr_total')
sns.lineplot(data = ex_df, x = ex_df.index, y = 'ot_total', marker = 'o', label = 'ot_total')


plt.show()

```

</br>

#### ë¶„ì„ ê¸°ê°„ë³„ë¡œ ë°ì´í„° ê·¸ë£¹í™”

</br>

- bf_covid(ì½”ë¡œë‚˜ ì´ì „)
```{python}
bf_covid = pd.concat([df_18_sum, df_19_sum])
bf_covid = ex_df.loc[['sum_18','sum_19']]
bf_covid
```

</br>

- during covid(ì½”ë¡œë‚˜ ê¸°ê°„)
```{python}
du_covid = pd.concat([df_20_sum, df_21_sum])
du_covid = ex_df.loc[['sum_20','sum_21']]
du_covid
```

</br>

- after covid(ì½”ë¡œë‚˜ ì´í›„)
```{python}
af_covid = df_22_sum
af_covid
af_covid
```


</br>

---
- í•œê¸€ ì•ˆê¹¨ì§€ê²Œ í°íŠ¸ ì—…ë°ì´íŠ¸ ì„¤ì •(êµì¬ p.203)

```{python}
plt.rcParams.update({'font.family' : 'Malgun Gothic'})
```
---

</br>

## ê·¸ë˜í”„ë¥¼ ë§Œë“¤ì–´ë³´ì!


```{python}
import seaborn as sns
```

</br>

### Covid-19 ì´ì „(2018~2019ë…„) 1ì¸ í‰ê·  ì—¬í–‰ ì§€ì¶œì•¡

- bf_covidë¥¼ ë³€í™˜í•´ì„œ 18ë…„ë„ì™€ 19ë…„ë„ í‰ê· ì„ íŒŒìƒë³€ìˆ˜'mean_bf'ë¡œ ì¶”ê°€
```{python}
bf_covid
```
</br>
```{python}
bf = bf_covid.transpose()
bf
```

- íŒŒìƒë³€ìˆ˜ 'mean_bf' ì¶”ê°€
```{python}
bf['mean_bf'] = (bf['sum_18'] + bf['sum_19'])/2
bf
```

</br>

- ì´ë¥¼ ë‹¤ì‹œ ë³€í™˜í•˜ì—¬ bf_covid_sumìœ¼ë¡œ ì €ì¥
```{python}
bf_covid_sum = bf.transpose()
bf_covid_sum
```

</br>

- bf_covid_sumì—ì„œ ë§ˆì§€ë§‰ í–‰ì¸ 'mean_bf'ë¶€ë¶„ë§Œ ì„ íƒ, ì´ë¥¼ bì— í• ë‹¹
```{python}
b = (bf_covid_sum.loc['mean_bf', :])
b
```

</br>

- ê·¸ë˜í”„ ë§Œë“¤ê¸°
```{python}
sns.barplot(data = b)
plt.title('Covid-19 ì´ì „(2018~2019ë…„) 1ì¸ í‰ê·  ì—¬í–‰ ì§€ì¶œì•¡')
plt.ylabel('1ì¸ í‰ê·  ì§€ì¶œì•¡')
plt.show()
plt.clf()
```

</br>

### Covid-19 ê¸°ê°„(2020~2021ë…„) 1ì¸ í‰ê·  ì—¬í–‰ ì§€ì¶œì•¡


```{python}
# du_covidë¥¼ ë³€í™˜í•´ì„œ 20ë…„ë„ì™€ 21ë…„ë„ í‰ê· ì„ 'mean_du'ë¡œ ì¶”ê°€
du = du_covid.transpose()
du['mean_du'] = (du['sum_20'] + du['sum_21'])/2

# ì´ë¥¼ ë‹¤ì‹œ ë³€í™˜í•˜ì—¬ du_covid_sumìœ¼ë¡œ ì €ì¥
du_covid_sum = du.transpose()

# du_covid_sumì—ì„œ 'mean_du'ë¶€ë¶„ë§Œ ì„ íƒ, ì´ë¥¼ dì— í• ë‹¹
d = (du_covid_sum.loc['mean_du', :])
d
```

</br>

- ê·¸ë˜í”„ ë§Œë“¤ê¸°
```{python}
sns.barplot(data = d)
plt.title('Covid-19 ê¸°ê°„(2020~2021ë…„) 1ì¸ í‰ê·  ì—¬í–‰ ì§€ì¶œì•¡')
plt.ylabel('1ì¸ í‰ê·  ì§€ì¶œì•¡')
plt.show()
plt.clf()
```

</br>

### Covid-19 ì´í›„(2022ë…„) 1ì¸ í‰ê·  ì—¬í–‰ ì§€ì¶œì•¡

```{python}
a = af_covid
a
```

</br>

- ê·¸ë˜í”„ ë§Œë“¤ê¸°
```{python}
sns.barplot(data = a)
plt.title('Covid-19 ì´í›„(2022ë…„) 1ì¸ í‰ê·  ì—¬í–‰ ì§€ì¶œì•¡')
plt.ylabel('1ì¸ í‰ê·  ì§€ì¶œì•¡')
plt.show()
plt.clf()
```

</br>

---

## êµ­ë‚´ì „ì²´ / ê´€ê´‘ì „ì²´ / ê¸°íƒ€ì „ì²´ ë³„ ê·¸ë˜í”„ ë§Œë“¤ê¸°

- ì—°ë„ë³„ dm_total, tr_total, ot_totalì„ ë‹´ì€ ex_df2 ìƒì„±


```{python}
df_18.loc['category-sum', ['dm_total','tr_total','ot_total']]
```

</br>

```{python}
ex_df2 = pd.concat([
                    df_18.loc['category-sum', ['dm_total','tr_total','ot_total']],
                    df_19.loc['category-sum', ['dm_total','tr_total','ot_total']],
                    df_20.loc['category-sum', ['dm_total','tr_total','ot_total']],
                    df_21.loc['category-sum', ['dm_total','tr_total','ot_total']],
                    df_22.loc['category-sum', ['dm_total','tr_total','ot_total']]
                   ])
                   
ex_df2
```

</br>

#### ë…„ë„ë³„ dm_total
```{python}
plt.figure(figsize=(10, 6))
sns.barplot(data = ex_df2, x = 'dm_total', y = 'class2', palette = 'viridis')
plt.xlabel('Class2')
plt.ylabel('DM Total')
plt.title('DM Total by Class2')
plt.show()
plt.clf()
```

</br>

- ì¦ê°ë¥ (%) = (ë³€í™”ëŸ‰ / ì´ˆê¸°ê°’) x 100
```{python}
#ex_df2['ì¦ê°ë¥ '] = (bë…„ë„-aë…„ë„)/aë…„ë„ X 100

dm_18 = ex_df2.loc['sum_18', 'dm_total'] #18ë…„ë„ dm_total
dm_19 = ex_df2.loc['sum_19', 'dm_total'] #19ë…„ë„ dm_total
dm_20 = ex_df2.loc['sum_20', 'dm_total'] #20ë…„ë„ dm_total
dm_21 = ex_df2.loc['sum_21', 'dm_total'] #21ë…„ë„ dm_total
dm_22 = ex_df2.loc['sum_22', 'dm_total'] #22ë…„ë„ dm_total
```

</br>

- 18ë…„ë„ -> 19ë…„ë„: `2.4%` ì¦ê°€
```{python}
((dm_19 - dm_18) / dm_18) * 100 
```


- 19ë…„ë„ -> 20ë…„ë„: `-45.4%` ê°ì†Œ
```{python}
((dm_20 - dm_19) / dm_19) * 100 
```


- 20ë…„ë„ -> 21ë…„ë„: `7.3%` ì¦ê°€
```{python}
((dm_21 - dm_20) / dm_20) * 100
```


- 21ë…„ë„ -> 22ë…„ë„: `33.2%` ì¦ê°€
```{python}
((dm_22 - dm_21) / dm_21) * 100 
```

</br>

***

#### ë…„ë„ë³„ tr_total
```{python}
plt.figure(figsize=(10, 6))
sns.barplot(data = ex_df2, x = 'tr_total', y = 'class2', palette = 'viridis')
plt.xlabel('Class2')
plt.ylabel('TR Total')
plt.title('TR Total by Class2')
plt.show()
plt.clf()
```
***

</br>

- ì¦ê°ë¥ (%) = (ë³€í™”ëŸ‰ / ì´ˆê¸°ê°’) x 100
```{python}
tr_18 = ex_df2.loc['sum_18', 'tr_total'] #18ë…„ë„ tr_total
tr_19 = ex_df2.loc['sum_19', 'tr_total'] #19ë…„ë„ tr_total
tr_20 = ex_df2.loc['sum_20', 'tr_total'] #20ë…„ë„ tr_total
tr_21 = ex_df2.loc['sum_21', 'tr_total'] #21ë…„ë„ tr_total
tr_22 = ex_df2.loc['sum_22', 'tr_total'] #22ë…„ë„ tr_total
```

</br>

- 18ë…„ë„ -> 19ë…„ë„: `8.0%` ì¦ê°€
```{python}
((tr_19 - tr_18) / tr_18) * 100
```

- 19ë…„ë„ -> 20ë…„ë„: `-46.8%` ê°ì†Œ
```{python}
((tr_20 - tr_19) / tr_19) * 100
```


- 20ë…„ë„ -> 21ë…„ë„: `14.11%` ì¦ê°€
```{python}
((tr_21 - tr_20) / tr_20) * 100
```


- 21ë…„ë„ -> 22ë…„ë„: `36.9%` ì¦ê°€
```{python}
((tr_22 - tr_21) / tr_21) * 100
```

</br>

***

#### ë…„ë„ë³„ ot_total
```{python}
plt.figure(figsize=(10, 6))
sns.barplot(data = ex_df2, x = 'ot_total', y = 'class2', palette = 'viridis')
plt.xlabel('Class2')
plt.ylabel('OT Total')
plt.title('OT Total by Class2')
plt.show()
plt.clf()
```

</br>

- ì¦ê°ë¥ (%) = (ë³€í™”ëŸ‰ / ì´ˆê¸°ê°’) x 100
```{python}
ot_18 = ex_df2.loc['sum_18', 'ot_total'] #18ë…„ë„ ot_total
ot_19 = ex_df2.loc['sum_19', 'ot_total'] #19ë…„ë„ ot_total
ot_20 = ex_df2.loc['sum_20', 'ot_total'] #20ë…„ë„ ot_total
ot_21 = ex_df2.loc['sum_21', 'ot_total'] #21ë…„ë„ ot_total
ot_22 = ex_df2.loc['sum_22', 'ot_total'] #22ë…„ë„ ot_total

```

</br>

- 18ë…„ë„ -> 19ë…„ë„: `-22.2%` ê°ì†Œ
```{python}
((ot_19 - ot_18) / ot_18) * 100
```


- 19ë…„ë„ -> 20ë…„ë„: `-36.6%` ê°ì†Œ
```{python}
((ot_20 - ot_19) / ot_19) * 100 
```


- 20ë…„ë„ -> 21ë…„ë„: `-27.0%` ê°ì†Œ
```{python}
((ot_21 - ot_20) / ot_20) * 100
```


- 21ë…„ë„ -> 22ë…„ë„: `2.9%` ì¦ê°€
```{python}
((ot_22 - ot_21) / ot_21) * 100 
```


---
- ì—¬ëŸ¬ë¶„ê»˜ ë“œë¦¬ëŠ” ì§ˆë¬¸

> ì™œ ot_total(ê¸°íƒ€ ì—¬í–‰)ì€ COVIDê°€ ì§€ë‚¬ìŒì—ë„ íšŒë³µë˜ì§€ ì•Šì„ê¹Œ?

- ìš°ë¦¬ ì¡°ì˜ ê²°ë¡ 

> ë¹„ëŒ€ë©´ ë¬¸í™”ì˜ í™•ì‚° ë° ìœ ì§€: ê²½ì¡°ê¸ˆë§Œ ë³´ë‚´ëŠ” ë¬¸í™”, ì¬íƒê·¼ë¬´, ì˜¨ë¼ì¸ ë¯¸íŒ… ë° ìˆ˜ì—…, ì‡¼í•‘ ë“± 

> ì¶”ê°€ë¡œ COVID ì „ê³¼ í›„ë¡œ ì—¬í–‰ ì§€ì¶œì•¡ì´ ì°¨ì´ë‚˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.


